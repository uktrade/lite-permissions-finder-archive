@import util._
@import views.html.common.page._
@import views.html.common.state._
@import models.ogel.OgelResultsDisplay

@(form: Form[_], display: OgelResultsDisplay)
@standardPage(display.pageTitle, Some(heading(display.pageTitle))){
  @errorSummary(form)
}{

  <form action="@controllers.ogel.routes.OgelResultsController.handleSubmit()" method="POST">

    @contextFormParams()

    @if(display.ogels.size > 0) {
      <p>
        These are <a href="https://www.gov.uk/government/collections/open-general-export-licences-ogels" class="external" rel="external" target="_blank">open licences<span class="visually-hidden"> (opens in a new tab)</span></a>. You can register for these and use them multiple times, without waiting for approval, but you have to comply with each licence's conditions of use.
      </p>

      <div class="form-group">
        <ol class="ogel-results search-results">
          @for(ogel <- display.ogels) {
            <li>
              <button type="submit" class="link" name="chosenOgel" value="@ogel.getId">@ogel.getName</button>
              <div class="font-xsmall">
              @for(entry <- ogel.getUsageSummary) {
                @entry<br/>
              }
              </div>
            </li>
          }
        </ol>
      </div>

      <div class="form-group">
        @detailPanel("none-suitable")(Html("None of these are suitable for my export")){
          <p>
            If you cannot use one of the open licences above, you should apply for a <a href="https://www.gov.uk/guidance/standard-individual-export-licences" class="external" rel="external" target="_blank">standard individual export licence<span class="visually-hidden"> (opens in a new tab)</span></a> (SIEL).
          </p>

          <p>
            SIELs will be introduced to this service soon, but for now you can apply for a SIEL through the SPIRE licensing service.
          </p>

          <a class="button font-medium" href="https://www.spire.trade.gov.uk/spire/fox/espire/LOGIN/login">Apply for a SIEL using SPIRE</a>
        }
      </div>

    } else {

      <p>
        At the moment there are no open general export licences (OGELs) you can use to send or take <strong class="bold-small">@display.controlCodeTitle</strong> to <strong class="bold-small">@Html(display.destinationCountryNamesHtml)</strong>.
      </p>

      <p>
        You should use a <a href="https://www.gov.uk/guidance/standard-individual-export-licences" class="external" rel="external" target="_blank">standard individual export licence<span class="visually-hidden"> (opens in a new tab)</span></a> (SIEL). SIELs will be introduced to this service soon, but for now you can apply for a SIEL through the SPIRE licensing service.
      </p>

      <p>
        <a class="button font-medium" href="https://www.spire.trade.gov.uk/spire/fox/espire/LOGIN/login">Apply for a SIEL using SPIRE</a>
      </p>

    }

  </form>
}