@import util._
@import views.html.common.form._
@import views.html.common.page._
@import views.html.common.state._
@import controllers.controlcode.routes.ControlCodeController
@import models.controlcode.ControlCodeDisplay

@(form: Form[_], display: ControlCodeDisplay)
@standardPage(display.title, Some(Html(display.title)), twoThirdsColumn = false){
  @errorSummary(form)
}{

  <ul class="tree">

    @if(display.showGreatestAncestor) {
      <li>
        <span class="tree-dot"></span>
        <span class="tree-desc">
          <span class="tree-desc-wrapper">@Html(display.greatestAncestor.friendlyDescription)</span>
        </span>
        <span class="tree-code">@display.greatestAncestor.alias</span>
      </li>
    }

    @for(otherAncestorCode <- display.otherAncestors) {
      <li>
        <span class="tree-dot"></span>
        <span class="tree-desc">
          <span class="tree-desc-wrapper">@Html(otherAncestorCode.friendlyDescription)</span>
        </span>
        <span class="tree-code">@otherAncestorCode.alias</span>
      </li>
    }

    <li class="last">
      <span class="tree-dot"></span>
      <span class="tree-desc">
        <span class="tree-desc-wrapper">@Html(display.friendlyDescription)</span>
      </span>
      <span class="tree-code">@display.controlCodeAlias</span>
    </li>

  </ul>
  @twoThirdsColumn {
    <form action="@ControlCodeController.handleSubmit()" method="POST">

      @contextFormParams()

      @formRadioBoolean(form("couldDescribeItems"), Html("Could this describe your items?"), "Yes", "No")

      <div class="form-group">
        <button type="submit" class="button">Continue</button>
      </div>

      @detailPanel("im-not-sure")(Html("I'm not sure")) {
        <p>
          If your item is not described above, you can:
        </p>

        <ul class="list list-bullet text">
          <li>
            <button class="link underlined" name="action" value="backToSearchResults">
              return to your search results and select another item type</button>, or
          </li>
          <li>
            <button class="link underlined" name="action" value="backToSearch">
              edit your item description to get a different set of results</button>
          </li>
        </ul>

        @helpInfoPanel()

      }

    </form>
  }

}